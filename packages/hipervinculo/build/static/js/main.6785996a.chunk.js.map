{"version":3,"sources":["assets/grass.jpg","assets/dirt.jpg","Ground.js","Player.js","Cube.js","App.js","index.js"],"names":["module","exports","Ground","props","usePlane","rotation","Math","PI","ref","texture","useLoader","THREE","grass","wrapS","wrapT","repeat","set","receiveShadow","args","map","color","keys","KeyW","KeyS","KeyA","KeyD","Space","moveFieldByKey","key","direction","frontVector","sideVector","Player","useSphere","mass","type","position","api","useState","forward","backward","left","right","jump","movement","setMovement","useEffect","handleKeyDown","e","m","code","handleKeyUp","document","addEventListener","removeEventListener","usePlayerControls","camera","useThree","velocity","useRef","subscribe","v","current","useFrame","copy","Number","subVectors","normalize","multiplyScalar","applyEuler","x","z","abs","toFixed","useCubeStore","create","cubes","addCube","y","state","Cubes","coords","index","Cube","useBox","hover","dirt","onMove","useCallback","stopPropagation","floor","faceIndex","onOut","onClick","dir","castShadow","onPointerMove","onPointerOut","Array","_","attachArray","App","shadowMap","gl","alpha","fov","sunPosition","intensity","gravity","Overlay","ready","className","style","pointerEvents","ReactDOM","render","getElementById"],"mappings":"gGAAAA,EAAOC,QAAU,IAA0B,mC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,4MCM9BC,EAAS,SAACC,GAAW,IAAD,EACjBC,aAAS,+BAASC,SAAU,EAAEC,KAAKC,GAAK,EAAG,EAAG,IAAOJ,MAA5DK,EADwB,oBAEzBC,EAAUC,YAAUC,gBAAqBC,KAG/C,OAFAH,EAAQI,MAAQJ,EAAQK,MAAQH,iBAChCF,EAAQM,OAAOC,IAAI,IAAK,KAEtB,0BAAMR,IAAKA,EAAKS,eAAa,GAC3B,yCAAqBC,KAAM,CAAC,IAAM,OAClC,0CAAsBC,IAAKV,EAASW,MAAM,Y,QCR1CC,EAAO,CAAEC,KAAM,UAAWC,KAAM,WAAYC,KAAM,OAAQC,KAAM,QAASC,MAAO,QAChFC,EAAiB,SAACC,GAAD,OAASP,EAAKO,IAC/BC,EAAY,IAAIlB,UAChBmB,EAAc,IAAInB,UAClBoB,EAAa,IAAIpB,UAiBVqB,EAAS,SAAC7B,GAAW,IAAD,EACZ8B,aAAU,+BAASC,KAAM,EAAGC,KAAM,UAAWC,SAAU,CAAC,EAAG,GAAI,IAAOjC,MAD1D,mBACxBK,EADwB,KACnB6B,EADmB,OAfP,WAAO,IAAD,EACEC,mBAAS,CAAEC,SAAS,EAAOC,UAAU,EAAOC,MAAM,EAAOC,OAAO,EAAOC,MAAM,IAD/E,mBACvBC,EADuB,KACbC,EADa,KAY9B,OAVAC,qBAAU,WACR,IAAMC,EAAgB,SAACC,GAAD,OAAOH,GAAY,SAACI,GAAD,mBAAC,eAAYA,GAAb,kBAAiBtB,EAAeqB,EAAEE,OAAQ,QAC7EC,EAAc,SAACH,GAAD,OAAOH,GAAY,SAACI,GAAD,mBAAC,eAAYA,GAAb,kBAAiBtB,EAAeqB,EAAEE,OAAQ,QAGjF,OAFAE,SAASC,iBAAiB,UAAWN,GACrCK,SAASC,iBAAiB,QAASF,GAC5B,WACLC,SAASE,oBAAoB,UAAWP,GACxCK,SAASE,oBAAoB,QAASH,MAEvC,IACIP,EAK0CW,GAAzChB,EAFuB,EAEvBA,QAASC,EAFc,EAEdA,SAAUC,EAFI,EAEJA,KAAMC,EAFF,EAEEA,MAAOC,EAFT,EAESA,KAChCa,EAAWC,cAAXD,OACFE,EAAWC,iBAAO,CAAC,EAAG,EAAG,IAU/B,OATAb,qBAAU,WAAWT,EAAIqB,SAASE,WAAU,SAACC,GAAD,OAAQH,EAASI,QAAUD,OAAK,IAC5EE,aAAS,WACPP,EAAOpB,SAAS4B,KAAKxD,EAAIsD,QAAQ1B,UACjCN,EAAYd,IAAI,EAAG,EAAGiD,OAAOzB,GAAYyB,OAAO1B,IAChDR,EAAWf,IAAIiD,OAAOxB,GAAQwB,OAAOvB,GAAQ,EAAG,GAChDb,EAAUqC,WAAWpC,EAAaC,GAAYoC,YAAYC,eAhChD,GAgCsEC,WAAWb,EAAOnD,UAClGgC,EAAIqB,SAAS1C,IAAIa,EAAUyC,EAAGZ,EAASI,QAAQ,GAAIjC,EAAU0C,GACzD5B,GAAQrC,KAAKkE,IAAId,EAASI,QAAQ,GAAGW,QAAQ,IAAM,KAAMpC,EAAIqB,SAAS1C,IAAI0C,EAASI,QAAQ,GAAI,GAAIJ,EAASI,QAAQ,OAEnH,0BAAMtD,IAAKA,K,iCCjCdkE,EAAeC,aAAO,SAAC3D,GAAD,MAAU,CACpC4D,MAAO,GACPC,QAAS,SAACP,EAAGQ,EAAGP,GAAP,OAAavD,GAAI,SAAC+D,GAAD,MAAY,CAAEH,MAAM,GAAD,mBAAMG,EAAMH,OAAZ,CAAmB,CAACN,EAAGQ,EAAGP,cAG5DS,EAAQ,WAEnB,OADcN,GAAa,SAACK,GAAD,OAAWA,EAAMH,SAC/BzD,KAAI,SAAC8D,EAAQC,GAAT,OAAmB,kBAAC,EAAD,CAAMtD,IAAKsD,EAAO9C,SAAU6C,QAGrDE,EAAO,SAAChF,GAAW,IAAD,EACfiF,aAAO,+BAASjD,KAAM,UAAahC,MAA1CK,EADsB,sBAER8B,mBAAS,MAFD,mBAEtB+C,EAFsB,KAEfrE,EAFe,KAGvB6D,EAAUH,GAAa,SAACK,GAAD,OAAWA,EAAMF,WACxCpE,EAAUC,YAAUC,gBAAqB2E,KACzCC,EAASC,uBAAY,SAACxC,GAAD,OAAQA,EAAEyC,kBAAmBzE,EAAIV,KAAKoF,MAAM1C,EAAE2C,UAAY,MAAM,IACrFC,EAAQJ,uBAAY,kBAAMxE,EAAI,QAAO,IACrC6E,EAAUL,uBAAY,SAACxC,GAC3BA,EAAEyC,kBAD+B,MAEbjF,EAAIsD,QAAQ1B,SAAxBkC,EAFyB,EAEzBA,EAAGQ,EAFsB,EAEtBA,EAAGP,EAFmB,EAEnBA,EACRuB,EAAM,CACV,CAACxB,EAAI,EAAGQ,EAAGP,GACX,CAACD,EAAI,EAAGQ,EAAGP,GACX,CAACD,EAAGQ,EAAI,EAAGP,GACX,CAACD,EAAGQ,EAAI,EAAGP,GACX,CAACD,EAAGQ,EAAGP,EAAI,GACX,CAACD,EAAGQ,EAAGP,EAAI,IAEbM,EAAO,WAAP,cAAWiB,EAAIxF,KAAKoF,MAAM1C,EAAE2C,UAAY,QACvC,IACH,OACE,0BAAMnF,IAAKA,EAAKS,eAAa,EAAC8E,YAAU,EAACC,cAAeT,EAAQU,aAAcL,EAAOC,QAASA,GAC3F,YAAIK,MAAM,IAAI/E,KAAI,SAACgF,EAAGjB,GAAJ,OACjB,0CAAsBkB,YAAY,WAAWjF,IAAKV,EAASmB,IAAKsD,EAAO9D,MAAOiE,IAAUH,EAAQ,UAAY,aAE9G,8CCnCS,SAASmB,IACtB,OACE,kBAAC,IAAD,CAAQC,WAAS,EAACC,GAAI,CAAEC,OAAO,GAAShD,OAAQ,CAAEiD,IAAK,KACrD,kBAAC,IAAD,CAAKC,YAAa,CAAC,IAAK,GAAI,OAC5B,kCAAcC,UAAW,KACzB,gCAAYZ,YAAU,EAACY,UAAW,GAAKvE,SAAU,CAAC,IAAK,IAAK,OAC5D,kBAAC,IAAD,CAASwE,QAAS,CAAC,GAAI,GAAI,IACzB,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAMxE,SAAU,CAAC,EAAG,IAAM,MAC1B,kBAAC,EAAD,OAEF,kBAAC,IAAD,OCfN,SAASyE,IAAW,IAAD,EACIvE,oBAAS,GADb,mBACVwE,EADU,KACH9F,EADG,KAEjB,OACE,oCACE,kBAACqF,EAAD,OACES,GACA,yBAAKC,UAAU,WACb,+DAGJ,yBAAKA,UAAU,MAAMC,MAAO,CAAEC,cAAeH,EAAQ,OAAS,OAASjB,QAAS,kBAAM7E,GAAI,OAKhGkG,IAASC,OAAO,kBAACN,EAAD,MAAazD,SAASgE,eAAe,W","file":"static/js/main.6785996a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/grass.a3785d79.jpg\";","module.exports = __webpack_public_path__ + \"static/media/dirt.692e992e.jpg\";","import * as THREE from \"three\"\nimport React from \"react\"\nimport { useLoader } from \"react-three-fiber\"\nimport { usePlane } from \"@react-three/cannon\"\nimport grass from \"./assets/grass.jpg\"\n\nexport const Ground = (props) => {\n  const [ref] = usePlane(() => ({ rotation: [-Math.PI / 2, 0, 0], ...props }))\n  const texture = useLoader(THREE.TextureLoader, grass)\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping\n  texture.repeat.set(240, 240)\n  return (\n    <mesh ref={ref} receiveShadow>\n      <planeBufferGeometry args={[1000, 1000]} />\n      <meshStandardMaterial map={texture} color=\"green\" />\n    </mesh>\n  )\n}\n","import * as THREE from \"three\"\nimport React, { useEffect, useRef, useState } from \"react\"\nimport { useSphere } from \"@react-three/cannon\"\nimport { useThree, useFrame } from \"react-three-fiber\"\n\nconst SPEED = 5\nconst keys = { KeyW: \"forward\", KeyS: \"backward\", KeyA: \"left\", KeyD: \"right\", Space: \"jump\" }\nconst moveFieldByKey = (key) => keys[key]\nconst direction = new THREE.Vector3()\nconst frontVector = new THREE.Vector3()\nconst sideVector = new THREE.Vector3()\n\nconst usePlayerControls = () => {\n  const [movement, setMovement] = useState({ forward: false, backward: false, left: false, right: false, jump: false })\n  useEffect(() => {\n    const handleKeyDown = (e) => setMovement((m) => ({ ...m, [moveFieldByKey(e.code)]: true }))\n    const handleKeyUp = (e) => setMovement((m) => ({ ...m, [moveFieldByKey(e.code)]: false }))\n    document.addEventListener(\"keydown\", handleKeyDown)\n    document.addEventListener(\"keyup\", handleKeyUp)\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown)\n      document.removeEventListener(\"keyup\", handleKeyUp)\n    }\n  }, [])\n  return movement\n}\n\nexport const Player = (props) => {\n  const [ref, api] = useSphere(() => ({ mass: 1, type: \"Dynamic\", position: [0, 10, 0], ...props }))\n  const { forward, backward, left, right, jump } = usePlayerControls()\n  const { camera } = useThree()\n  const velocity = useRef([0, 0, 0])\n  useEffect(() => void api.velocity.subscribe((v) => (velocity.current = v)), [])\n  useFrame(() => {\n    camera.position.copy(ref.current.position)\n    frontVector.set(0, 0, Number(backward) - Number(forward))\n    sideVector.set(Number(left) - Number(right), 0, 0)\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED).applyEuler(camera.rotation)\n    api.velocity.set(direction.x, velocity.current[1], direction.z)\n    if (jump && Math.abs(velocity.current[1].toFixed(2)) < 0.05) api.velocity.set(velocity.current[0], 10, velocity.current[2])\n  })\n  return <mesh ref={ref} />\n}\n","import * as THREE from \"three\"\nimport React, { useCallback } from \"react\"\nimport { useLoader } from \"react-three-fiber\"\nimport { useBox } from \"@react-three/cannon\"\nimport { useState } from \"react\"\nimport create from \"zustand\"\nimport dirt from \"./assets/dirt.jpg\"\n\nconst useCubeStore = create((set) => ({\n  cubes: [],\n  addCube: (x, y, z) => set((state) => ({ cubes: [...state.cubes, [x, y, z]] })),\n}))\n\nexport const Cubes = () => {\n  const cubes = useCubeStore((state) => state.cubes)\n  return cubes.map((coords, index) => <Cube key={index} position={coords} />)\n}\n\nexport const Cube = (props) => {\n  const [ref] = useBox(() => ({ type: \"Static\", ...props }))\n  const [hover, set] = useState(null)\n  const addCube = useCubeStore((state) => state.addCube)\n  const texture = useLoader(THREE.TextureLoader, dirt)\n  const onMove = useCallback((e) => (e.stopPropagation(), set(Math.floor(e.faceIndex / 2))), [])\n  const onOut = useCallback(() => set(null), [])\n  const onClick = useCallback((e) => {\n    e.stopPropagation()\n    const { x, y, z } = ref.current.position\n    const dir = [\n      [x + 1, y, z],\n      [x - 1, y, z],\n      [x, y + 1, z],\n      [x, y - 1, z],\n      [x, y, z + 1],\n      [x, y, z - 1],\n    ]\n    addCube(...dir[Math.floor(e.faceIndex / 2)])\n  }, [])\n  return (\n    <mesh ref={ref} receiveShadow castShadow onPointerMove={onMove} onPointerOut={onOut} onClick={onClick}>\n      {[...Array(6)].map((_, index) => (\n        <meshStandardMaterial attachArray=\"material\" map={texture} key={index} color={hover === index ? \"hotpink\" : \"white\"} />\n      ))}\n      <boxBufferGeometry />\n    </mesh>\n  )\n}\n","import React from \"react\"\nimport { Canvas } from \"react-three-fiber\"\nimport { Sky, PointerLockControls } from \"@react-three/drei\"\nimport { Physics } from \"@react-three/cannon\"\nimport { Ground } from \"./Ground\"\nimport { Player } from \"./Player\"\nimport { Cube, Cubes } from \"./Cube\"\n\nexport default function App() {\n  return (\n    <Canvas shadowMap gl={{ alpha: false }} camera={{ fov: 35 }}>\n      <Sky sunPosition={[100, 10, 100]} />\n      <ambientLight intensity={0.3} />\n      <pointLight castShadow intensity={0.8} position={[100, 100, 100]} />\n      <Physics gravity={[0, -30, 0]}>\n        <Ground />\n        <Player />\n        <Cube position={[0, 0.5, -10]} />\n        <Cubes />\n      </Physics>\n      <PointerLockControls />\n    </Canvas>\n  )\n}\n","import React, { useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./styles.css\"\nimport App from \"./App\"\n\nfunction Overlay() {\n  const [ready, set] = useState(false)\n  return (\n    <>\n      <App />\n      {!ready && (\n        <div className=\"overlay\">\n          <div>← Click the dot to start</div>\n        </div>\n      )}\n      <div className=\"dot\" style={{ pointerEvents: ready ? \"none\" : \"all\" }} onClick={() => set(true)} />\n    </>\n  )\n}\n\nReactDOM.render(<Overlay />, document.getElementById(\"root\"))\n"],"sourceRoot":""}